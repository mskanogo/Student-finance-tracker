<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Finance Tracker</title>
    <link rel="stylesheet" href="styles/main.css">
</head>

<body class="sidebar-closed">

<a href="#main-content" class="skip-link">Skip to content</a>

<aside id="sidebar" aria-label="Site navigation">

    <div class="sidebar-header">

        <div class="sidebar-logo" aria-hidden="true"></div>

        <span class="sidebar-title">Finance Tracker</span>

        <button id="sidebar-close"
                aria-label="Close navigation"
                aria-expanded="false">&#10005;</button>

    </div>

    <nav aria-label="Main navigation">
        <ul>
            <li>
                <a href="#about">
                    <span class="nav-icon" aria-hidden="true"></span>
                    About
                </a>
            </li>
            <li>
                <a href="#dashboard">
                    <span class="nav-icon" aria-hidden="true"></span>
                    Dashboard
                </a>
            </li>
            <li>
                <a href="#records">
                    <span class="nav-icon" aria-hidden="true"></span>
                    Records
                </a>
            </li>
            <li>
                <a href="#form">
                    <span class="nav-icon" aria-hidden="true"></span>
                    Add Transaction
                </a>
            </li>
            <li>
                <a href="#settings">
                    <span class="nav-icon" aria-hidden="true"></span>
                    Settings
                </a>
            </li>
        </ul>
    </nav>

    <div class="sidebar-footer">Student Finance Tracker v1.0</div>

</aside>

<div id="overlay" aria-hidden="true"></div>

<div id="main-wrapper">

    <header id="topbar">
        <button id="sidebar-open"
                aria-label="Open navigation"
                aria-expanded="false">&#9776;</button>

        <h1>Student Finance Tracker</h1>
    </header>

    <main id="main-content">

        <div id="status-message"
             role="status"
             aria-live="polite"
             aria-atomic="true"></div>

        <section id="about" aria-labelledby="about-heading">
            <h2 id="about-heading">About this app</h2>
            <p>This application helps you track your expenses and plan your
                monthly budget. Add transactions, search and sort your records,
                set a spending cap, and import or export your data as JSON.</p>

            <div class="contact-links">
                <a href="https://github.com/mskanogo/student-finance-tracker"
                   target="_blank"
                   rel="noopener noreferrer">
                    GitHub
                </a>
                <a href="mailto:m.kanogo@alustudent.com">
                    m.kanogo@alustudent.com
                </a>
            </div>
        </section>

        <section id="dashboard" aria-labelledby="dashboard-heading">
            <h2 id="dashboard-heading">Dashboard</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total transactions</h3>
                    <p id="total-transactions" class="stat-value">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total spent</h3>
                    <p id="total-spent" class="stat-value">$0.00</p>
                </div>
                <div class="stat-card">
                    <h3>Top category</h3>
                    <p id="top-category" class="stat-value">â€”</p>
                </div>
            </div>

            <div class="budget-status"
                 id="budget-message"
                 aria-live="polite"
                 aria-atomic="true">
                <p>Budget status: <span id="budget-text">Within budget</span></p>
            </div>

            <div id="trend-chart"
                 role="img"
                 aria-label="Spending trend for the last 7 days"></div>

        </section>

        <section id="records" aria-labelledby="records-heading">
            <h2 id="records-heading">Transaction records</h2>

            <div class="records-controls">

                <div class="search-box">
                    <label for="search-input">Search:</label>
                    <input type="text"
                           id="search-input"
                           placeholder="Enter a search term or regex..."
                           aria-label="Search transactions by keyword or pattern">

                    <label for="search-case">
                        <input type="checkbox" id="search-case">
                        Case-insensitive
                    </label>
                </div>

                <div class="sort-controls">
                    <span id="sort-label">Sort by:</span>
                    <button class="sort-btn"
                            data-sort="date"
                            aria-describedby="sort-label">Date</button>
                    <button class="sort-btn"
                            data-sort="description"
                            aria-describedby="sort-label">Description</button>
                    <button class="sort-btn"
                            data-sort="amount"
                            aria-describedby="sort-label">Amount</button>
                </div>

            </div>

            <div class="table-container">
                <table id="transactions-table">
                    <thead>
                    <tr>
                        <th scope="col">Date</th>
                        <th scope="col">Description</th>
                        <th scope="col">Category</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Actions</th>
                    </tr>
                    </thead>
                    <tbody id="table-body">
                    </tbody>
                </table>
            </div>

        </section>

        <section id="form" aria-labelledby="form-heading">
            <h2 id="form-heading">Add New Transaction</h2>

            <form id="transaction-form" novalidate>

                <div class="form-group">
                    <label for="description">Description:</label>
                    <input type="text"
                           id="description"
                           name="description"
                           required
                           minlength="3"
                           maxlength="50"
                           aria-describedby="description-error"
                           autocomplete="off">
                    <div class="error-message"
                         id="description-error"
                         role="alert"
                         aria-live="polite"></div>
                </div>

                <div class="form-group">
                    <label for="amount">Amount ($):</label>
                    <input type="number"
                           id="amount"
                           name="amount"
                           required
                           min="0.01"
                           step="0.01"
                           aria-describedby="amount-error">
                    <div class="error-message"
                         id="amount-error"
                         role="alert"
                         aria-live="polite"></div>
                </div>

                <div class="form-group">
                    <label for="category">Category:</label>
                    <select id="category"
                            name="category"
                            required
                            aria-describedby="category-error">
                        <option value="">Select a category</option>
                        <option value="Food">Food</option>
                        <option value="Books">Books</option>
                        <option value="Transport">Transport</option>
                        <option value="Entertainment">Entertainment</option>
                        <option value="Fees">Fees</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error-message"
                         id="category-error"
                         role="alert"
                         aria-live="polite"></div>
                </div>

                <div class="form-group">
                    <label for="date">Date:</label>
                    <input type="date"
                           id="date"
                           name="date"
                           required
                           aria-describedby="date-error">
                    <div class="error-message"
                         id="date-error"
                         role="alert"
                         aria-live="polite"></div>
                </div>

                <button type="submit">Add Transaction</button>
                <button type="reset">Clear Form</button>

            </form>
        </section>

        <section id="settings" aria-labelledby="settings-heading">
            <h2 id="settings-heading">Settings</h2>

            <div class="settings-group">
                <h3>Budget Cap</h3>
                <div class="settings-inline">
                    <label for="budget-cap">Monthly Budget Cap ($):</label>
                    <input type="number"
                           id="budget-cap"
                           min="0"
                           step="0.01"
                           value="500"
                           aria-label="Monthly budget cap in dollars">
                    <button type="button" id="save-cap">Save Cap</button>
                </div>
            </div>

            <div class="settings-group">
                <h3>Currency Rates</h3>
                <p style="font-size:0.85rem; color: var(--color-text-muted); margin-bottom:0.75rem;">
                    Set manual exchange rates. Amounts will be shown in all three currencies.
                </p>

                <div class="settings-inline">
                    <label for="base-currency">Base currency:</label>
                    <input type="text"
                           id="base-currency"
                           maxlength="3"
                           value="USD"
                           aria-label="Base currency code, e.g. USD">
                </div>

                <div class="currency-row">
                    <label for="currency2-code">Currency 2:</label>
                    <input type="text"
                           id="currency2-code"
                           maxlength="3"
                           value="EUR"
                           aria-label="Second currency code">
                    <label for="currency2-rate">Rate:</label>
                    <input type="number"
                           id="currency2-rate"
                           min="0.0001"
                           step="0.0001"
                           value="0.92"
                           aria-label="Exchange rate for second currency">
                </div>

                <div class="currency-row">
                    <label for="currency3-code">Currency 3:</label>
                    <input type="text"
                           id="currency3-code"
                           maxlength="3"
                           value="KES"
                           aria-label="Third currency code">
                    <label for="currency3-rate">Rate:</label>
                    <input type="number"
                           id="currency3-rate"
                           min="0.0001"
                           step="0.0001"
                           value="130"
                           aria-label="Exchange rate for third currency">
                </div>

                <button type="button" id="save-rates" style="margin-top:0.75rem;">
                    Save Rates
                </button>
            </div>

            <div class="settings-group">
                <h3>Import / Export Data</h3>
                <button type="button" id="export-data">Export Data (JSON)</button>

                <div class="import-group">
                    <label for="import-file">Import Data:</label>
                    <input type="file"
                           id="import-file"
                           accept=".json"
                           aria-describedby="import-feedback">
                </div>

                <div id="import-feedback"
                     role="status"
                     aria-live="polite"></div>
            </div>

        </section>

    </main>

    <footer>
        <p>&copy; 2026 Student Finance Tracker &mdash; By Martha Stacey Kanogo</p>
    </footer>

</div>

<script src="scripts/state.js" type="module"></script>
<script src="scripts/storage.js" type="module"></script>
<script src="scripts/validators.js" type="module"></script>
<script src="scripts/search.js" type="module"></script>
<script src="scripts/ui.js" type="module"></script>
<script src="scripts/main.js" type="module"></script>

</body>
</html>